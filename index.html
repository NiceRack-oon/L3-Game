<!DOCTYPE html>
<html lang="en">
  <script src="player.js"></script>
  <head>
    <title>Cross an Invercargill Road: Extreme Edition</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />  
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <canvas id="gamecanvas" width="1500" height="900"></canvas> 
<script>
  var canvas, canvasContext;

window.onload = function() {
    canvas = document.getElementById('gamecanvas');
    canvasContext = canvas.getContext('2d');       

       document.addEventListener('keydown', keyPressed)
       document.addEventListener('keyup', keyReleased)

    setInterval(mainLoop, 1000 / 50); 
}
window.addEventListener("keydown", function(e) {
  if([LEFT_KEY, UP_KEY, RIGHT_KEY, DOWN_KEY].includes(e.keyCode)) {
    e.preventDefault();
  }
});
var pXpos = 0;
var pYpos = 0;
var pXspeed = 5;
var PYspeed = 3;
const P_SIZE = 20;

var leftKeyPressed = false;
var upKeyPressed = false;
var rightKeyPressed = false;
var downKeyPressed = false;

const LEFT_KEY = 37;
const UP_KEY = 38;
const RIGHT_KEY = 39;
const DOWN_KEY = 40;


var player = new
 Player(pXpos, pYpos, P_SIZE, P_SIZE, 'green', pXspeed, PYspeed)

function mainLoop() {
    colorRect(0, 0, canvas.width, canvas.height, 'black');   
    

    player.draw();
    player.move();
}

    function keyPressed(evt){
      if(evt.keyCode == LEFT_KEY){
        leftKeyPressed = true;

      }
      if(evt.keyCode == UP_KEY){
        upKeyPressed = true;

      }
      if(evt.keyCode == RIGHT_KEY){
        rightKeyPressed = true;

      }
      if(evt.keyCode == DOWN_KEY){
        downKeyPressed = true;

      }
    }
    function keyReleased(evt){
      if(evt.keyCode == LEFT_KEY){
        leftKeyPressed = false;

      }
      if(evt.keyCode == UP_KEY){
        upKeyPressed = false;

      }
      if(evt.keyCode == RIGHT_KEY){
        rightKeyPressed = false;

      }
      if(evt.keyCode == DOWN_KEY){
        downKeyPressed = false;

      }
    }
function colorRect(x, y, w, h, c) {
    canvasContext.fillStyle = c; 
    canvasContext.fillRect(x, y, w, h);     
}
</script>
  </body>